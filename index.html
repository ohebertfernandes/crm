<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM V4 Company</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fonte Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { v4red: '#cf0e0e', v4black: '#1a1a1a', v4gray: '#f4f4f4' },
                    fontFamily: { sans: ['Montserrat', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fadeIn { animation: fadeIn 0.2s ease-out; }
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
        .animate-slideInRight { animation: slideInRight 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
    </style>
</head>
<body class="bg-v4gray text-gray-800 font-sans h-screen overflow-hidden">
    <div id="root"></div>

    <!-- Import Map para facilitar o uso do React via navegador -->
    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.263.1"
            }
        }
    </script>

    <!-- Código da Aplicação -->
    <script type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { Plus, X, ChevronRight, ChevronLeft, Save, FileText, CheckSquare, BarChart, Grid, Heart, Layout, LayoutDashboard, Search, Settings, RefreshCw, Trash2, Calendar } from 'lucide-react';

        // --- CONFIGURAÇÃO ---
        const COLUMNS = [
            { id: 'pre-kickoff', title: 'Pré Kick-off', color: 'border-l-4 border-yellow-500' },
            { id: 'kickoff', title: 'Kick-off (Reunião)', color: 'border-l-4 border-red-600' },
            { id: 'planejamento', title: 'Planejamento', color: 'border-l-4 border-blue-500' },
            { id: 'em-execucao', title: 'Em Execução', color: 'border-l-4 border-green-500' },
        ];

        const TABS = [
            { id: 'pre-info', label: '1. Pré Kick-off (Dados Completos)', icon: FileText },
            { id: 'kickoff-q', label: '2. Perguntas Kick-off (Aprofundamento)', icon: Settings },
            { id: 'onboarding', label: '3. Onboarding Técnico', icon: CheckSquare },
            { id: 'market', label: '4. Mercado & SWOT (Estratégia)', icon: Search },
            { id: 'audit', label: '5. Auditoria de Mídia', icon: BarChart },
            { id: 'bmc', label: '6. Business Model Canvas', icon: LayoutDashboard },
            { id: 'sexy', label: '7. Sexy Canvas', icon: Heart },
        ];

        const INITIAL_LEAD = {
            id: 101,
            title: "Lead Exemplo (Demo)",
            contact: "João Silva",
            status: "pre-kickoff",
            data: {
                pre_nome: "Lead Exemplo (Demo)",
                pre_envolvidos: "João Silva (CEO)",
                pre_objetivo: "Exemplo de demonstração",
                kickoff: {}, bmc: {}, sexy: {}, market: {}, swot: {}, audit: {}
            }
        };

        // --- COMPONENTES AUXILIARES ---
        const Card = ({ lead, onClick, onMove, onDelete }) => {
            const colIndex = COLUMNS.findIndex(c => c.id === lead.status);
            const canMoveLeft = colIndex > 0;
            const canMoveRight = colIndex < COLUMNS.length - 1;

            const handleDragStart = (e) => {
                e.dataTransfer.setData("leadId", lead.id);
                e.dataTransfer.effectAllowed = "move";
            };

            return React.createElement('div', {
                draggable: true,
                onDragStart: handleDragStart,
                onClick: () => onClick(lead),
                className: `group relative bg-white p-4 rounded shadow-sm mb-3 cursor-grab active:cursor-grabbing hover:shadow-md transition-all border border-gray-200 ${COLUMNS.find(c => c.id === lead.status)?.color || ''}`
            }, 
                React.createElement('div', { className: "pr-8" },
                    React.createElement('h3', { className: "font-bold text-gray-800 text-sm leading-tight mb-1" }, lead.title),
                    React.createElement('p', { className: "text-xs text-gray-500 truncate" }, lead.contact)
                ),
                React.createElement('div', { className: "absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity" },
                    canMoveLeft && React.createElement('button', {
                        onClick: (e) => { e.stopPropagation(); onMove(lead.id, COLUMNS[colIndex - 1].id); },
                        className: "p-1 hover:bg-gray-100 rounded text-gray-400 hover:text-black transition-colors",
                        title: "Voltar etapa"
                    }, React.createElement(ChevronLeft, { size: 14 })),
                    canMoveRight && React.createElement('button', {
                        onClick: (e) => { e.stopPropagation(); onMove(lead.id, COLUMNS[colIndex + 1].id); },
                        className: "p-1 hover:bg-gray-100 rounded text-gray-400 hover:text-black transition-colors",
                        title: "Avançar etapa"
                    }, React.createElement(ChevronRight, { size: 14 }))
                ),
                React.createElement('div', { className: "mt-3 flex justify-between items-center text-[10px] text-gray-400 uppercase font-semibold tracking-wider" },
                    React.createElement('span', null, `#${String(lead.id).slice(-4)}`),
                    React.createElement('button', {
                        onClick: (e) => { e.stopPropagation(); onDelete(lead.id); },
                        className: "hover:text-red-600 transition-colors",
                        title: "Excluir Card"
                    }, React.createElement(Trash2, { size: 12 }))
                )
            );
        };

        const SectionTitle = ({ children }) => React.createElement('h3', { className: "text-xl font-bold text-gray-800 mt-8 mb-4 border-b border-gray-200 pb-2 flex items-center gap-2" },
            React.createElement('div', { className: "w-2 h-6 bg-red-600 rounded-sm" }),
            children
        );

        const InputGroup = ({ label, sublabel, value, onChange, type = "textarea" }) => React.createElement('div', { className: "mb-4" },
            React.createElement('label', { className: "block text-sm font-bold text-gray-700 mb-1" }, label),
            sublabel && React.createElement('p', { className: "text-xs text-gray-500 mb-2 italic" }, sublabel),
            type === 'textarea' ? React.createElement('textarea', {
                className: "w-full p-2 border border-gray-300 rounded focus:border-red-600 focus:ring-1 focus:ring-red-600 outline-none transition bg-white",
                rows: "3",
                value: value || '',
                onChange: e => onChange(e.target.value)
            }) : React.createElement('input', {
                type: "text",
                className: "w-full p-2 border border-gray-300 rounded focus:border-red-600 focus:ring-1 focus:ring-red-600 outline-none transition bg-white",
                value: value || '',
                onChange: e => onChange(e.target.value)
            })
        );

        const BMCCell = ({ title, fieldKey, data, onChange, height = "h-40" }) => React.createElement('div', { className: `border border-gray-300 p-2 bg-white flex flex-col ${height}` },
            React.createElement('span', { className: "text-xs font-bold text-gray-600 uppercase mb-1" }, title),
            React.createElement('textarea', {
                className: "flex-1 w-full text-sm resize-none outline-none bg-transparent",
                placeholder: "...",
                value: data[fieldKey] || '',
                onChange: (e) => onChange(fieldKey, e.target.value)
            })
        );

        const BusinessModelCanvas = ({ data, onChange }) => {
            const handleChange = (key, val) => onChange('bmc', { ...data, [key]: val });
            return React.createElement('div', { className: "bg-gray-50 p-4 rounded border border-gray-200 overflow-x-auto" },
                React.createElement('div', { className: "min-w-[800px] grid grid-cols-5 gap-2" },
                    React.createElement('div', { className: "row-span-2 col-span-1" }, React.createElement(BMCCell, { title: "Parcerias Principais", fieldKey: "parcerias", data: data, onChange: handleChange, height: "h-96" })),
                    React.createElement('div', { className: "col-span-1 flex flex-col gap-2" },
                        React.createElement(BMCCell, { title: "Atividades Principais", fieldKey: "atividades", data: data, onChange: handleChange }),
                        React.createElement(BMCCell, { title: "Recursos Principais", fieldKey: "recursos", data: data, onChange: handleChange })
                    ),
                    React.createElement('div', { className: "row-span-2 col-span-1" }, React.createElement(BMCCell, { title: "Proposta de Valor", fieldKey: "proposta", data: data, onChange: handleChange, height: "h-96" })),
                    React.createElement('div', { className: "col-span-1 flex flex-col gap-2" },
                        React.createElement(BMCCell, { title: "Relacionamento com Clientes", fieldKey: "relacionamento", data: data, onChange: handleChange }),
                        React.createElement(BMCCell, { title: "Canais", fieldKey: "canais", data: data, onChange: handleChange })
                    ),
                    React.createElement('div', { className: "row-span-2 col-span-1" }, React.createElement(BMCCell, { title: "Segmentos de Clientes", fieldKey: "segmentos", data: data, onChange: handleChange, height: "h-96" })),
                    React.createElement('div', { className: "col-span-2.5" }, React.createElement(BMCCell, { title: "Estrutura de Custos", fieldKey: "custos", data: data, onChange: handleChange, height: "h-32" })),
                    React.createElement('div', { className: "col-span-2.5" }, React.createElement(BMCCell, { title: "Fontes de Receita", fieldKey: "receitas", data: data, onChange: handleChange, height: "h-32" }))
                )
            );
        };

        const SexyCanvas = ({ data, onChange }) => {
            const handleChange = (key, val) => onChange('sexy', { ...data, [key]: val });
            const normalize = (str) => str.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            return React.createElement('div', { className: "grid md:grid-cols-2 gap-6" },
                React.createElement('div', { className: "bg-pink-50 p-4 rounded border border-pink-200" },
                    React.createElement('h4', { className: "font-bold text-pink-700 mb-4 text-center text-lg" }, "Os 7 Pecados (Emoção/Desejo)"),
                    ['Luxúria', 'Gula', 'Avareza', 'Preguiça', 'Ira', 'Inveja', 'Orgulho'].map(p => 
                        React.createElement(InputGroup, { key: p, label: p, value: data[normalize(p)], onChange: (v) => handleChange(normalize(p), v), type: "text" })
                    )
                ),
                React.createElement('div', { className: "bg-blue-50 p-4 rounded border border-blue-200" },
                    React.createElement('h4', { className: "font-bold text-blue-700 mb-4 text-center text-lg" }, "Criança Interior (Curiosidade/Diversão)"),
                    ['Curiosidade', 'Diversão', 'Pertencimento', 'Segurança', 'Liberdade'].map(p => 
                        React.createElement(InputGroup, { key: p, label: p, value: data[normalize(p)], onChange: (v) => handleChange(normalize(p), v), type: "text" })
                    )
                )
            );
        };

        // --- APLICAÇÃO PRINCIPAL ---
        function CRMBoard() {
            const [leads, setLeads] = useState([INITIAL_LEAD]);
            const [selectedLead, setSelectedLead] = useState(null);
            const [activeTab, setActiveTab] = useState('pre-info');
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [dragOverCol, setDragOverCol] = useState(null);

            // INTEGRAÇÃO
            useEffect(() => {
                const loadLeadsFromStorage = () => {
                    try {
                        const storedLeads = localStorage.getItem('v4_crm_leads');
                        if (storedLeads) {
                            const parsedLeads = JSON.parse(storedLeads);
                            if (Array.isArray(parsedLeads)) {
                                const validLeads = parsedLeads.filter(l => l && l.id && l.data);
                                setLeads(prev => {
                                    const currentIds = new Set(prev.map(l => l.id));
                                    const newLeads = validLeads.filter(l => !currentIds.has(l.id));
                                    return [...prev, ...newLeads];
                                });
                            }
                        }
                    } catch (e) { console.error("Erro ao carregar dados", e); }
                };
                loadLeadsFromStorage();
                window.addEventListener('storage', loadLeadsFromStorage);
                return () => window.removeEventListener('storage', loadLeadsFromStorage);
            }, []);

            const clearStorageData = () => {
                if(confirm('Limpar dados importados?')) {
                    localStorage.removeItem('v4_crm_leads');
                    window.location.reload();
                }
            }

            const updateLeadData = (section, key, value) => {
                if (!selectedLead) return;
                const updatedLead = { ...selectedLead };
                if (!updatedLead.data) updatedLead.data = {};
                if (section === 'root') { updatedLead.data[key] = value; } 
                else {
                    if (!updatedLead.data[section]) updatedLead.data[section] = {};
                    if (typeof key === 'object') { updatedLead.data[section] = key; }
                    else { updatedLead.data[section][key] = value; }
                }
                setSelectedLead(updatedLead);
                setLeads(leads.map(l => l.id === updatedLead.id ? updatedLead : l));
            };

            const handleCreateLead = () => {
                const newLead = { id: Date.now(), title: "Lead Manual", contact: "Aguardando...", status: "pre-kickoff", data: { kickoff: {}, bmc: {}, sexy: {}, market: {}, swot: {}, audit: {} } };
                setLeads([...leads, newLead]);
            };

            const handleDeleteLead = (id) => {
                if(confirm('Tem certeza que deseja excluir este lead?')) {
                    setLeads(prev => prev.filter(l => l.id !== id));
                    if(selectedLead?.id === id) setIsModalOpen(false);
                    
                    // Atualizar também o LocalStorage
                    const currentStorage = JSON.parse(localStorage.getItem('v4_crm_leads') || '[]');
                    const newStorage = currentStorage.filter(l => l.id !== id);
                    localStorage.setItem('v4_crm_leads', JSON.stringify(newStorage));
                }
            };

            const changeStatus = (leadId, newStatus) => {
                const targetLead = leads.find(l => l.id === leadId);
                if (!targetLead) return;
                const updated = { ...targetLead, status: newStatus };
                setLeads(prev => prev.map(l => l.id === leadId ? updated : l));
                if (selectedLead && selectedLead.id === leadId) setSelectedLead(updated);
            };

            const renderTabContent = () => {
                const data = selectedLead?.data || {};
                switch (activeTab) {
                    case 'pre-info':
                        return React.createElement('div', { className: "space-y-4 animate-fadeIn pb-10" },
                            React.createElement('h2', { className: "text-2xl font-bold text-gray-800" }, "1. Dados do Pré Kick-off"),
                            React.createElement(SectionTitle, null, "Dados Gerais & Cultura"),
                            React.createElement(InputGroup, { label: "Nome da Empresa", value: data.pre_nome, onChange: (v) => updateLeadData('root', 'pre_nome', v), type: "text" }),
                            React.createElement(InputGroup, { label: "Principais Envolvidos", value: data.pre_envolvidos, onChange: (v) => updateLeadData('root', 'pre_envolvidos', v) }),
                            React.createElement(InputGroup, { label: "Site/Redes", value: data.pre_site_social, onChange: (v) => updateLeadData('root', 'pre_site_social', v), type: "text" }),
                            React.createElement(InputGroup, { label: "Histórico", value: data.pre_historico, onChange: (v) => updateLeadData('root', 'pre_historico', v) }),
                            React.createElement('div', { className: "grid md:grid-cols-3 gap-4" },
                                React.createElement(InputGroup, { label: "Missão", value: data.pre_missao, onChange: (v) => updateLeadData('root', 'pre_missao', v) }),
                                React.createElement(InputGroup, { label: "Visão", value: data.pre_visao, onChange: (v) => updateLeadData('root', 'pre_visao', v) }),
                                React.createElement(InputGroup, { label: "Valores", value: data.pre_valores, onChange: (v) => updateLeadData('root', 'pre_valores', v) })
                            ),
                            React.createElement(SectionTitle, null, "Negócio & Financeiro"),
                            React.createElement(InputGroup, { label: "Modelo de Negócio", value: data.pre_modelo_negocio, onChange: (v) => updateLeadData('root', 'pre_modelo_negocio', v) }),
                            React.createElement(InputGroup, { label: "Faturamento (Mês a Mês)", value: data.pre_faturamento_detalhado, onChange: (v) => updateLeadData('root', 'pre_faturamento_detalhado', v) }),
                            React.createElement(InputGroup, { label: "Mix de Produtos", value: data.pre_mix_produtos, onChange: (v) => updateLeadData('root', 'pre_mix_produtos', v) }),
                            React.createElement('div', { className: "grid md:grid-cols-2 gap-4" },
                                React.createElement(InputGroup, { label: "% Clientes Novos vs Base", value: data.pre_novos_vs_base, onChange: (v) => updateLeadData('root', 'pre_novos_vs_base', v), type: "text" }),
                                React.createElement(InputGroup, { label: "Ticket Médio", value: data.pre_ticket_medio, onChange: (v) => updateLeadData('root', 'pre_ticket_medio', v), type: "text" }),
                                React.createElement(InputGroup, { label: "% Custo Variável", value: data.pre_custo_variavel, onChange: (v) => updateLeadData('root', 'pre_custo_variavel', v), type: "text" }),
                                React.createElement(InputGroup, { label: "Recorrência", value: data.pre_recorrencia, onChange: (v) => updateLeadData('root', 'pre_recorrencia', v), type: "text" })
                            ),
                            React.createElement(SectionTitle, null, "Cliente & Mercado"),
                            React.createElement(InputGroup, { label: "Público Alvo (Persona)", value: data.pre_publico_alvo, onChange: (v) => updateLeadData('root', 'pre_publico_alvo', v) }),
                            React.createElement(InputGroup, { label: "Grande Promessa", value: data.pre_promessa, onChange: (v) => updateLeadData('root', 'pre_promessa', v) }),
                            React.createElement(InputGroup, { label: "Dores e Medos", value: data.pre_necessidades_medos, onChange: (v) => updateLeadData('root', 'pre_necessidades_medos', v) }),
                            React.createElement(InputGroup, { label: "Concorrentes", value: data.pre_concorrentes, onChange: (v) => updateLeadData('root', 'pre_concorrentes', v) }),
                            React.createElement(InputGroup, { label: "Objeções", value: data.pre_objecoes, onChange: (v) => updateLeadData('root', 'pre_objecoes', v) }),
                            React.createElement(SectionTitle, null, "Marketing & Comercial"),
                            React.createElement(InputGroup, { label: "Canais Atuais", value: data.pre_canais_atuais, onChange: (v) => updateLeadData('root', 'pre_canais_atuais', v) }),
                            React.createElement(InputGroup, { label: "% Por Canal", value: data.pre_canais_percentual, onChange: (v) => updateLeadData('root', 'pre_canais_percentual', v) }),
                            React.createElement('div', { className: "grid md:grid-cols-2 gap-4" },
                                React.createElement(InputGroup, { label: "Verba Mídia", value: data.pre_verba_midia, onChange: (v) => updateLeadData('root', 'pre_verba_midia', v), type: "text" }),
                                React.createElement(InputGroup, { label: "Possui MIV?", value: data.pre_miv, onChange: (v) => updateLeadData('root', 'pre_miv', v), type: "text" })
                            ),
                            React.createElement(InputGroup, { label: "Equipe Marketing", value: data.pre_equipe_mkt, onChange: (v) => updateLeadData('root', 'pre_equipe_mkt', v) }),
                            React.createElement('div', { className: "mt-4 pt-4 border-t border-gray-200" },
                                React.createElement(InputGroup, { label: "Equipe Comercial", value: data.pre_equipe_comercial, onChange: (v) => updateLeadData('root', 'pre_equipe_comercial', v) }),
                                React.createElement(InputGroup, { label: "% Por Vendedor", value: data.pre_vendedores_percentual, onChange: (v) => updateLeadData('root', 'pre_vendedores_percentual', v) }),
                                React.createElement(InputGroup, { label: "Processos Comerciais", value: data.pre_processos_comercial, onChange: (v) => updateLeadData('root', 'pre_processos_comercial', v) })
                            ),
                            React.createElement('div', { className: "mt-6 bg-red-50 border-l-4 border-red-600 p-4" },
                                React.createElement('h4', { className: "font-bold text-red-800" }, "Objetivo Principal"),
                                React.createElement(InputGroup, { label: "", value: data.pre_objetivo, onChange: (v) => updateLeadData('root', 'pre_objetivo', v) })
                            ),
                            React.createElement('div', { className: "mt-4 flex items-center gap-2 text-gray-600 bg-gray-100 p-3 rounded" },
                                React.createElement(Calendar, { size: 18 }),
                                React.createElement('span', { className: "font-semibold text-sm" }, "Sugestão Kick-off:"),
                                React.createElement('span', { className: "text-sm" }, data.pre_sugestao_kickoff || 'Não informada')
                            )
                        );
                    case 'kickoff-q': return React.createElement('div', { className: "space-y-6 animate-fadeIn pb-10" }, React.createElement('h2', { className: "text-xl font-bold" }, "2. Perguntas Kick-off"), React.createElement(SectionTitle, null, "Posicionamento"), React.createElement(InputGroup, { label: "Pitch Elevador", value: data.kickoff?.q1, onChange: (v) => updateLeadData('kickoff', 'q1', v) }), React.createElement(InputGroup, { label: "Dor Latente", value: data.kickoff?.q3, onChange: (v) => updateLeadData('kickoff', 'q3', v) }), React.createElement(SectionTitle, null, "Oferta"), React.createElement(InputGroup, { label: "Super Garantia", value: data.kickoff?.q11, onChange: (v) => updateLeadData('kickoff', 'q11', v) }));
                    case 'onboarding': return React.createElement('div', { className: "space-y-6 animate-fadeIn pb-10" }, React.createElement('h2', { className: "text-xl font-bold" }, "3. Onboarding Técnico"), React.createElement(InputGroup, { label: "Anotações Gerais", value: data.kickoff?.acessos_obs, onChange: (v) => updateLeadData('kickoff', 'acessos_obs', v) }));
                    case 'market': return React.createElement('div', { className: "space-y-6 animate-fadeIn pb-10" }, React.createElement('h2', { className: "text-xl font-bold" }, "4. Mercado & SWOT"), React.createElement(InputGroup, { label: "TAM/SAM/SOM", value: data.market?.tam, onChange: (v) => updateLeadData('market', 'tam', v) }));
                    case 'audit': return React.createElement('div', { className: "space-y-6 animate-fadeIn pb-10" }, React.createElement('h2', { className: "text-xl font-bold" }, "5. Auditoria"), React.createElement(InputGroup, { label: "Estrutura Atual", value: data.audit?.saber, onChange: (v) => updateLeadData('audit', 'saber', v) }));
                    case 'bmc': return React.createElement('div', { className: "space-y-4 animate-fadeIn pb-10" }, React.createElement('h2', { className: "text-xl font-bold" }, "6. BMC"), React.createElement(BusinessModelCanvas, { data: data.bmc || {}, onChange: (key, val) => updateLeadData(key, val) }));
                    case 'sexy': return React.createElement('div', { className: "space-y-4 animate-fadeIn pb-10" }, React.createElement('h2', { className: "text-xl font-bold" }, "7. Sexy Canvas"), React.createElement(SexyCanvas, { data: data.sexy || {}, onChange: (key, val) => updateLeadData(key, val) }));
                    default: return React.createElement('div', null, "Selecione uma aba.");
                }
            };

            return React.createElement('div', { className: "flex flex-col h-screen bg-gray-100 font-sans text-gray-900 overflow-hidden" },
                React.createElement('header', { className: "bg-black text-white px-6 py-4 flex justify-between items-center shadow-md z-10" },
                    React.createElement('div', { className: "flex items-center gap-2" },
                        React.createElement('div', { className: "w-8 h-8 bg-red-600 rounded flex items-center justify-center font-bold" }, "V4"),
                        React.createElement('h1', { className: "text-xl font-bold tracking-wide" }, "CRM & Kick-off Board")
                    ),
                    React.createElement('div', { className: "flex gap-2" },
                        React.createElement('button', { onClick: () => window.location.reload(), className: "flex items-center gap-2 bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded text-xs font-semibold transition" }, React.createElement(RefreshCw, { size: 14 }), " Atualizar"),
                        React.createElement('button', { onClick: clearStorageData, className: "flex items-center gap-2 bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded text-xs font-semibold transition" }, React.createElement(Trash2, { size: 14 })),
                        React.createElement('button', { onClick: handleCreateLead, className: "flex items-center gap-2 bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm font-semibold transition" }, React.createElement(Plus, { size: 16 }), " Novo Lead")
                    )
                ),
                React.createElement('div', { className: "flex-1 overflow-x-auto p-6" },
                    React.createElement('div', { className: "flex gap-4 h-full min-w-[1000px]" },
                        COLUMNS.map(col => React.createElement('div', {
                            key: col.id,
                            onDragOver: (e) => { e.preventDefault(); setDragOverCol(col.id); },
                            onDrop: (e) => {
                                e.preventDefault();
                                const leadId = Number(e.dataTransfer.getData("leadId"));
                                setDragOverCol(null);
                                changeStatus(leadId, col.id);
                            },
                            className: `flex-1 bg-gray-50 rounded-lg flex flex-col min-w-[280px] shadow-sm max-h-full transition-colors ${dragOverCol === col.id ? 'bg-red-50 ring-2 ring-red-300' : ''}`
                        },
                            React.createElement('div', { className: `p-3 font-bold text-gray-700 border-b flex justify-between items-center ${col.color}` },
                                React.createElement('span', null, col.title),
                                React.createElement('span', { className: "bg-gray-200 text-gray-600 text-xs px-2 py-0.5 rounded-full" }, leads.filter(l => l.status === col.id).length)
                            ),
                            React.createElement('div', { className: "p-3 overflow-y-auto flex-1 custom-scrollbar" },
                                leads.filter(l => l.status === col.id).map(lead => 
                                    React.createElement(Card, { key: lead.id, lead: lead, onClick: () => { setSelectedLead(lead); setIsModalOpen(true); }, onMove: changeStatus, onDelete: handleDeleteLead })
                                )
                            )
                        ))
                    )
                ),
                isModalOpen && selectedLead && React.createElement('div', { className: "fixed inset-0 bg-black/50 z-50 flex justify-end backdrop-blur-sm animate-fadeIn" },
                    React.createElement('div', { className: "bg-white w-full max-w-6xl h-full shadow-2xl flex flex-col animate-slideInRight" },
                        React.createElement('div', { className: "flex justify-between items-center p-4 border-b bg-gray-50" },
                            React.createElement('div', null,
                                React.createElement('h2', { className: "text-2xl font-bold text-gray-800 flex items-center gap-2" },
                                    selectedLead.title,
                                    React.createElement('span', { className: "text-sm font-normal text-gray-500 bg-gray-200 px-2 py-0.5 rounded" }, `#${String(selectedLead.id).slice(-4)}`)
                                ),
                                React.createElement('div', { className: "flex items-center gap-4 mt-2" },
                                    React.createElement('select', {
                                        value: selectedLead.status,
                                        onChange: (e) => changeStatus(selectedLead.id, e.target.value),
                                        className: "text-sm border rounded px-2 py-1 bg-white outline-none"
                                    }, COLUMNS.map(col => React.createElement('option', { key: col.id, value: col.id }, col.title)))
                                )
                            ),
                            React.createElement('button', { onClick: () => setIsModalOpen(false), className: "text-gray-400 hover:text-black p-2" }, React.createElement(X, { size: 24 }))
                        ),
                        React.createElement('div', { className: "flex flex-1 overflow-hidden" },
                            React.createElement('div', { className: "w-64 bg-gray-50 border-r overflow-y-auto" },
                                React.createElement('nav', { className: "p-2 space-y-1" },
                                    TABS.map(tab => {
                                        const Icon = tab.icon;
                                        return React.createElement('button', {
                                            key: tab.id,
                                            onClick: () => setActiveTab(tab.id),
                                            className: `w-full flex items-center gap-3 px-3 py-3 text-sm font-medium rounded-md transition-colors ${activeTab === tab.id ? 'bg-white text-red-600 shadow-sm border border-gray-200' : 'text-gray-600 hover:bg-gray-100'}`
                                        }, React.createElement(Icon, { size: 18 }), React.createElement('span', { className: "text-left" }, tab.label));
                                    })
                                )
                            ),
                            React.createElement('div', { className: "flex-1 overflow-y-auto p-8 bg-white" },
                                React.createElement('div', { className: "max-w-4xl mx-auto" }, renderTabContent())
                            )
                        )
                    )
                )
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(CRMBoard));
    </script>
</body>
</html>
